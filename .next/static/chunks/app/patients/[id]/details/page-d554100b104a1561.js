(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[186],{2032:function(e,t,a){Promise.resolve().then(a.bind(a,8953))},8953:function(e,t,a){"use strict";a.d(t,{default:function(){return b}});var r=a(7437),s=a(2265),n=a(6463),l=a(4304),i=a(7619),o=a(5101),c=a(2279),d=a(4573),h=a(8100),u=a(6648),x=a(2477),p=a(3265),m=e=>{let{isOpen:t,onClose:a,children:s}=e;return t?(0,r.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 ",children:(0,r.jsxs)("div",{className:"relative w-auto rounded-lg bg-white p-20 shadow-lg dark:bg-gray-800 ",children:[(0,r.jsx)("button",{onClick:a,className:"absolute top-4 right-4 rounded-full p-2 text-gray-500 hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-700",children:(0,r.jsx)(d.Z,{className:"h-6 w-6"})}),(0,r.jsx)("div",{className:"mb-6",children:s}),(0,r.jsxs)("div",{className:"flex justify-end gap-4",children:[(0,r.jsx)("button",{onClick:a,className:"rounded-lg bg-gray-200 px-4 py-2 text-gray-800 hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-200 dark:hover:bg-gray-600",children:"إلغاء"}),(0,r.jsxs)("button",{onClick:()=>{let e=document.getElementById("printable-area");if(e){let t=window.open("","","height=600,width=800");if(t){t.document.write("<html><head><title>Print Card</title>");let a=Array.from(document.querySelectorAll('link[rel="stylesheet"], style')).map(e=>e.outerHTML).join("");t.document.write(a),t.document.write("</head><body>"),t.document.write(e.outerHTML),t.document.write("</body></html>"),t.document.close(),t.focus(),t.print()}}},className:"flex items-center rounded-lg bg-brand-blue px-4 py-2 text-white hover:bg-brand-blue/90",children:[(0,r.jsx)(h.Z,{className:"me-2 h-5 w-5"}),"طباعة"]})]})]})}):null},g=e=>{let{patient:t}=e,a=(0,x.o)(new Date,new Date(t.birthdate));return(0,r.jsxs)("div",{id:"printable-area",className:"relative w-[600px] h-[300px] bg-white shadow-lg overflow-hidden",dir:"ltr",children:[(0,r.jsx)("div",{className:"absolute top-0 left-0 w-full h-12 bg-green-700 flex items-center px-4 z-10",children:(0,r.jsx)("p",{className:"text-white text-xs font-bold",children:"VOUS ETES ENTRE LES BONNES MAINS"})}),(0,r.jsx)("div",{className:"absolute top-0 right-0 w-1/2 h-16 bg-green-500 transform -skew-x-12 origin-top-left"}),(0,r.jsx)("div",{className:"absolute top-0 right-16 w-1/2 h-16 bg-blue-500 transform -skew-x-12 origin-top-left"}),(0,r.jsx)("div",{className:"absolute top-1/2 rounded-full opacity-50 right-0 transform -translate-y-1/2 w-32 h-32 bg-repeat",style:{backgroundImage:"radial-gradient(#a0aec0 1px, transparent 1px)",backgroundSize:"8px 8px"}}),(0,r.jsx)("div",{className:"absolute top-1/2 rounded-full opacity-50 left-0 transform -translate-y-1/2 w-32 h-32 bg-repeat",style:{backgroundImage:"radial-gradient(#a0aec0 1px, transparent 1px)",backgroundSize:"8px 8px"}}),(0,r.jsx)("div",{className:"absolute bottom-0 left-0 w-full h-10 bg-blue-500"}),(0,r.jsxs)("div",{className:"relative z-20 p-4 flex items-center h-full",children:[(0,r.jsx)("div",{className:"w-1/3 text-center justify-center flex items-center",children:(0,r.jsx)("img",{src:"/logoc2.png",alt:"Patient Photo",className:"w-25 h-25"})}),(0,r.jsxs)("div",{className:"w-2/3  p-5",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-center mb-4",children:"CARTE DE SANTE"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-x-4 gap-y-2 text-sm",children:[(0,r.jsx)("p",{className:"font-bold",children:"Nom:"}),(0,r.jsx)("p",{children:t.fullname}),(0,r.jsx)("p",{className:"font-bold",children:"Matricule ID:"}),(0,r.jsx)("p",{children:t.patient_number}),(0,r.jsx)("p",{className:"font-bold",children:"Age:"}),(0,r.jsxs)("p",{children:[a," ANS"]}),(0,r.jsx)("p",{className:"font-bold",children:"Adresse:"}),(0,r.jsx)("p",{children:t.full_address})]})]})]})]})},b=e=>{var t,a;let{patientId:b}=e,f=(0,n.useRouter)(),[j,w]=(0,s.useState)(!1),{data:y,error:v,isLoading:N}=(0,l.ZP)("patient_".concat(b),()=>(0,i.YR)(b));if(N)return(0,r.jsx)(o.Z,{});if(v||!y)return(0,r.jsx)("div",{className:"flex h-full items-center justify-center p-8",children:(0,r.jsx)(c.Z,{message:"لم يتم العثور على المريض.",details:"قد يكون المريض قد تم حذفه أو أن الرابط غير صحيح."})});let k=(0,x.o)(new Date,new Date(y.birthdate)),E=e=>{let{label:t,value:a,className:s=""}=e;return(0,r.jsxs)("div",{className:"".concat(s),children:[(0,r.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:t}),(0,r.jsx)("p",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100",children:a||"-"})]})};return(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"رؤية معلومات المريض"}),(0,r.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"معلومات المريض"})]}),(0,r.jsxs)("button",{onClick:()=>f.push("/patients"),className:"flex items-center rounded-lg bg-gray-100 px-4 py-2 text-gray-800 transition-colors hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-200 dark:hover:bg-gray-600",children:[(0,r.jsx)(d.Z,{className:"h-6 w-6"}),(0,r.jsx)("span",{className:"me-2",children:"إغلاق"})]})]}),(0,r.jsxs)("div",{className:"rounded-lg bg-white shadow-md dark:bg-gray-800 pb-5",children:[(0,r.jsx)("div",{className:"h-40 rounded-t-lg bg-brand-blue"}),(0,r.jsxs)("div",{className:"-mt-14 flex items-end justify-between px-8",children:[(0,r.jsxs)("div",{className:"flex items-end gap-4",children:[(0,r.jsx)(u.default,{src:y.avatar||"/default-avatar.png",alt:y.fullname,width:112,height:112,className:"h-28 w-28 rounded-lg border-4 border-white bg-white object-cover shadow-lg dark:border-gray-800"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100",children:y.fullname}),(0,r.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"الإسم الكامل"})]})]}),(0,r.jsxs)("button",{onClick:()=>{w(!0)},className:"flex items-center rounded-lg bg-brand-blue px-4 py-2 text-white shadow-lg transition-colors hover:bg-brand-blue/90",children:[(0,r.jsx)(h.Z,{className:"h-5 w-5"}),(0,r.jsx)("span",{className:"me-2",children:"طباعة بطاقة للمريض"})]})]})]}),(0,r.jsxs)("div",{className:"p-8 mt-10 rounded-lg bg-white shadow-md dark:bg-gray-800",dir:"rtl",children:[(0,r.jsx)("div",{className:"flex justify-start",children:(0,r.jsx)("h2",{className:"mb-6 text-xl font-bold text-gray-800 dark:text-white",dir:"rtl",children:" حول المريض :"})}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,r.jsx)(E,{label:"الإسم الكامل",value:y.fullname}),(0,r.jsx)(E,{label:"العمر",value:k}),(0,r.jsx)(E,{label:"تاريخ الميلاد",value:(0,p.WU)(new Date(y.birthdate),"yyyy/MM/dd")}),(0,r.jsx)(E,{label:"الجنس",value:"male"===y.gender.value?"ذكر":"أنثى"}),(0,r.jsx)(E,{label:"زمرة الدم",value:y.blood_type.value}),(0,r.jsx)(E,{label:"رقم جواز السفر",value:y.passport_number||"-"}),(0,r.jsx)(E,{label:"رقم التأمين",value:y.insurance_number||"-"}),(0,r.jsx)(E,{label:"رقم الهاتف",value:y.phone}),(0,r.jsx)(E,{label:"العنوان",value:y.full_address}),(0,r.jsx)(E,{label:"شركة التأمين",value:null!==(a=null===(t=y.insurance_society_branch)||void 0===t?void 0:t.name)&&void 0!==a?a:"غير محدد"}),(0,r.jsx)(E,{label:"رقم المريض",value:y.patient_number||"1234"})]})]}),(0,r.jsx)(m,{isOpen:j,onClose:()=>w(!1),children:(0,r.jsx)(g,{patient:y})})]})}},2279:function(e,t,a){"use strict";var r=a(7437);a(2265);var s=a(1652);t.Z=e=>{let{message:t,details:a}=e;return(0,r.jsx)("div",{className:"rounded-lg border-l-4 border-red-500 bg-red-50 p-4 dark:bg-red-900/20",children:(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)(s.Z,{className:"h-5 w-5 text-red-400","aria-hidden":"true"})}),(0,r.jsxs)("div",{className:"ml-3",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:t}),a&&(0,r.jsx)("div",{className:"mt-2 text-sm text-red-700 dark:text-red-300",children:(0,r.jsx)("p",{children:a})})]})]})})}},5101:function(e,t,a){"use strict";var r=a(7437);a(2265),t.Z=()=>(0,r.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-white bg-opacity-75 dark:bg-gray-900 dark:bg-opacity-75",children:(0,r.jsx)("div",{className:"h-16 w-16",children:(0,r.jsxs)("svg",{className:"animate-spin text-brand-blue",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})})})},7619:function(e,t,a){"use strict";a.d(t,{b$:function(){return h},hT:function(){return x},pd:function(){return m},Mp:function(){return p},YR:function(){return d},X4:function(){return c},xu:function(){return u}});var r=a(8472);let s="https://erp-api.cliniquehariri.com/api/v1",n="118|Iz5rNFTyoKSqkjyKcYPkYGEidKSVyaykGex8shduf2115e5b",l=r.Z.create({baseURL:s,headers:{"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest"},withCredentials:!0});l.interceptors.request.use(e=>(n&&(e.headers.Authorization="Bearer ".concat(n)),e),e=>Promise.reject(e));let i=r.Z.create({withCredentials:!0,headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"}});async function o(){try{let e=new URL(s).origin;await i.get("".concat(e,"/sanctum/csrf-cookie"),{withCredentials:!0,headers:{Accept:"application/json"}})}catch(e){throw console.error("Error fetching CSRF token:",e),e}}i.interceptors.response.use(e=>e,e=>(console.error("API Error:",e),Promise.reject(e)));let c=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{let t=await l.get("/patients",{params:{page:e.page||1,per_page:e.per_page||10,search:e.search||"",paginate:!0,doctor_id:"1"}});return{data:t.data.data,meta:t.data.meta}}catch(e){throw console.error("Error fetching patients:",e),e}},d=async e=>{try{return(await l.get("/patients/".concat(e))).data.data}catch(t){throw console.error("Error fetching patient with ID ".concat(e,":"),t),t}},h=async e=>{try{await o();let t=document.cookie.split(";").map(e=>e.trim()),a=null;for(let e of t)if(e.startsWith("XSRF-TOKEN=")||e.startsWith("X-XSRF-TOKEN=")||e.toLowerCase().startsWith("xsrf-token=")){a=decodeURIComponent(e.split("=")[1]);break}if(!a)throw Error("CSRF token not found in cookies");if(!(e.avatar&&"string"==typeof e.avatar&&e.avatar.startsWith("data:")))return(await i.post("/patients",e,{headers:{"X-XSRF-TOKEN":a}})).data.data;{let t=new FormData,r=await fetch(e.avatar),s=await r.blob();return t.append("avatar",s,"avatar.jpg"),Object.entries(e).forEach(e=>{let[a,r]=e;"avatar"!==a&&null!=r&&t.append(a,r.toString())}),(await i.post("/patients",t,{headers:{"Content-Type":"multipart/form-data","X-XSRF-TOKEN":a}})).data.data}}catch(e){throw console.error("Error adding patient:",e),e}},u=async(e,t)=>{try{await o();let a=document.cookie.split(";").map(e=>e.trim()),r=null;for(let e of a)if(e.startsWith("XSRF-TOKEN=")||e.startsWith("X-XSRF-TOKEN=")||e.toLowerCase().startsWith("xsrf-token=")){r=decodeURIComponent(e.split("=")[1]);break}if(!r)throw Error("CSRF token not found in cookies");if(!(t.avatar&&"string"==typeof t.avatar&&t.avatar.startsWith("data:")))return(await i.put("/patients/".concat(e),t,{headers:{"X-XSRF-TOKEN":r}})).data.data;{let a=new FormData,s=await fetch(t.avatar),n=await s.blob();return a.append("avatar",n,"avatar.jpg"),Object.entries(t).forEach(e=>{let[t,r]=e;"avatar"!==t&&null!=r&&a.append(t,r.toString())}),a.append("_method","PUT"),(await i.post("/patients/".concat(e),a,{headers:{"Content-Type":"multipart/form-data","X-XSRF-TOKEN":r}})).data.data}}catch(t){throw console.error("Error updating patient with ID ".concat(e,":"),t),t}},x=async e=>{try{await o();let t=document.cookie.split(";").map(e=>e.trim()),a=null;for(let e of t)if(e.startsWith("XSRF-TOKEN=")||e.startsWith("X-XSRF-TOKEN=")||e.toLowerCase().startsWith("xsrf-token=")){a=decodeURIComponent(e.split("=")[1]);break}if(!a)throw Error("CSRF token not found in cookies");return await i.delete("/patients/".concat(e),{headers:{"X-XSRF-TOKEN":a}}),!0}catch(t){throw console.error("Error deleting patient with ID ".concat(e,":"),t),t}},p=async e=>{try{return(await l.get("/patients/".concat(e,"/medical-services"))).data.data}catch(t){return console.error("Error fetching medical services for patient ".concat(e,":"),t),[]}},m=async e=>{try{return(await l.get("/patients/".concat(e,"/medical-records"))).data.data}catch(t){return console.error("Error fetching medical records for patient ".concat(e,":"),t),[]}}}},function(e){e.O(0,[472,304,648,972,971,23,744],function(){return e(e.s=2032)}),_N_E=e.O()}]);