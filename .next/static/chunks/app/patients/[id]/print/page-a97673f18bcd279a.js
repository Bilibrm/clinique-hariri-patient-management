(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[550],{864:function(t,e,a){Promise.resolve().then(a.bind(a,6268))},6268:function(t,e,a){"use strict";var r=a(7437),n=a(2265),s=a(4304),i=a(7619),o=a(5101),c=a(2477);e.default=t=>{let{patientId:e}=t,{data:a,error:l,isLoading:d}=(0,s.ZP)("patient_".concat(e),()=>(0,i.YR)(e));if((0,n.useEffect)(()=>{if(a&&!d){let t=setTimeout(()=>{window.print()},500);return()=>clearTimeout(t)}},[d,a]),d)return(0,r.jsx)("div",{className:"flex h-screen items-center justify-center",children:(0,r.jsx)(o.Z,{})});if(l||!a)return(0,r.jsx)("div",{className:"p-8 text-center",children:"لم يتم العثور على المريض."});let p=(0,c.o)(new Date,new Date(a.birthdate));return(0,r.jsx)("div",{className:"flex h-screen items-center justify-center bg-gray-200",children:(0,r.jsxs)("div",{id:"printable-area",className:"relative w-[498px] h-[225px] bg-white shadow-lg overflow-hidden",children:[(0,r.jsx)("div",{className:"absolute top-0 left-0 w-full h-12 bg-gray-700 flex items-center px-4 z-10",children:(0,r.jsx)("p",{className:"text-white text-xs font-bold",children:"VOUS ETES ENTRE LES BONNES MAINS"})}),(0,r.jsx)("div",{className:"absolute top-0 right-0 w-1/2 h-16 bg-green-500 transform -skew-x-12 origin-top-left"}),(0,r.jsx)("div",{className:"absolute top-0 right-16 w-1/2 h-16 bg-blue-500 transform -skew-x-12 origin-top-left"}),(0,r.jsx)("div",{className:"absolute top-1/2 right-4 transform -translate-y-1/2 w-32 h-32 bg-repeat",style:{backgroundImage:"radial-gradient(#a0aec0 1px, transparent 1px)",backgroundSize:"8px 8px"}}),(0,r.jsx)("div",{className:"absolute bottom-0 left-0 w-full h-10 bg-blue-500"}),(0,r.jsxs)("div",{className:"relative z-20 p-4 flex items-center h-full",children:[(0,r.jsxs)("div",{className:"w-1/3 text-center",children:[(0,r.jsx)("div",{className:"mx-auto w-24 h-24 rounded-full bg-green-100 flex items-center justify-center border-4 border-white shadow-md",children:(0,r.jsx)("svg",{className:"w-12 h-12 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),(0,r.jsx)("h2",{className:"text-sm font-bold mt-2",children:"CLINIQUE HARIRI"}),(0,r.jsx)("p",{className:"text-xs",children:"INTERNATIONALE"}),(0,r.jsx)("p",{className:"text-xs",children:"مستشفى الحريري العالمي"})]}),(0,r.jsxs)("div",{className:"w-2/3 pr-4",children:[(0,r.jsx)("h1",{className:"text-xl font-bold text-center mb-4",children:"CARTE DE SANTE"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-x-4 gap-y-2 text-sm",children:[(0,r.jsx)("p",{className:"font-bold",children:"Nom:"}),(0,r.jsx)("p",{children:a.fullname}),(0,r.jsx)("p",{className:"font-bold",children:"Matricule ID:"}),(0,r.jsx)("p",{children:a.patient_number}),(0,r.jsx)("p",{className:"font-bold",children:"Age:"}),(0,r.jsxs)("p",{children:[p," ANS"]}),(0,r.jsx)("p",{className:"font-bold",children:"Adresse:"}),(0,r.jsx)("p",{children:a.full_address})]})]})]})]})})}},5101:function(t,e,a){"use strict";var r=a(7437);a(2265),e.Z=()=>(0,r.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-white bg-opacity-75 dark:bg-gray-900 dark:bg-opacity-75",children:(0,r.jsx)("div",{className:"h-16 w-16",children:(0,r.jsxs)("svg",{className:"animate-spin text-brand-blue",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})})})},7619:function(t,e,a){"use strict";a.d(e,{b$:function(){return p},hT:function(){return u},pd:function(){return m},Mp:function(){return f},YR:function(){return d},X4:function(){return l},xu:function(){return h}});var r=a(8472);let n="https://erp-api.cliniquehariri.com/api/v1",s="118|Iz5rNFTyoKSqkjyKcYPkYGEidKSVyaykGex8shduf2115e5b",i=r.Z.create({baseURL:n,headers:{"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest"},withCredentials:!0});i.interceptors.request.use(t=>(s&&(t.headers.Authorization="Bearer ".concat(s)),t),t=>Promise.reject(t));let o=r.Z.create({withCredentials:!0,headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"}});async function c(){try{let t=new URL(n).origin;await o.get("".concat(t,"/sanctum/csrf-cookie"),{withCredentials:!0,headers:{Accept:"application/json"}})}catch(t){throw console.error("Error fetching CSRF token:",t),t}}o.interceptors.response.use(t=>t,t=>(console.error("API Error:",t),Promise.reject(t)));let l=async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{let e=await i.get("/patients",{params:{page:t.page||1,per_page:t.per_page||10,search:t.search||"",paginate:!0,doctor_id:"1"}});return{data:e.data.data,meta:e.data.meta}}catch(t){throw console.error("Error fetching patients:",t),t}},d=async t=>{try{return(await i.get("/patients/".concat(t))).data.data}catch(e){throw console.error("Error fetching patient with ID ".concat(t,":"),e),e}},p=async t=>{try{await c();let e=document.cookie.split(";").map(t=>t.trim()),a=null;for(let t of e)if(t.startsWith("XSRF-TOKEN=")||t.startsWith("X-XSRF-TOKEN=")||t.toLowerCase().startsWith("xsrf-token=")){a=decodeURIComponent(t.split("=")[1]);break}if(!a)throw Error("CSRF token not found in cookies");if(!(t.avatar&&"string"==typeof t.avatar&&t.avatar.startsWith("data:")))return(await o.post("/patients",t,{headers:{"X-XSRF-TOKEN":a}})).data.data;{let e=new FormData,r=await fetch(t.avatar),n=await r.blob();return e.append("avatar",n,"avatar.jpg"),Object.entries(t).forEach(t=>{let[a,r]=t;"avatar"!==a&&null!=r&&e.append(a,r.toString())}),(await o.post("/patients",e,{headers:{"Content-Type":"multipart/form-data","X-XSRF-TOKEN":a}})).data.data}}catch(t){throw console.error("Error adding patient:",t),t}},h=async(t,e)=>{try{await c();let a=document.cookie.split(";").map(t=>t.trim()),r=null;for(let t of a)if(t.startsWith("XSRF-TOKEN=")||t.startsWith("X-XSRF-TOKEN=")||t.toLowerCase().startsWith("xsrf-token=")){r=decodeURIComponent(t.split("=")[1]);break}if(!r)throw Error("CSRF token not found in cookies");if(!(e.avatar&&"string"==typeof e.avatar&&e.avatar.startsWith("data:")))return(await o.put("/patients/".concat(t),e,{headers:{"X-XSRF-TOKEN":r}})).data.data;{let a=new FormData,n=await fetch(e.avatar),s=await n.blob();return a.append("avatar",s,"avatar.jpg"),Object.entries(e).forEach(t=>{let[e,r]=t;"avatar"!==e&&null!=r&&a.append(e,r.toString())}),a.append("_method","PUT"),(await o.post("/patients/".concat(t),a,{headers:{"Content-Type":"multipart/form-data","X-XSRF-TOKEN":r}})).data.data}}catch(e){throw console.error("Error updating patient with ID ".concat(t,":"),e),e}},u=async t=>{try{await c();let e=document.cookie.split(";").map(t=>t.trim()),a=null;for(let t of e)if(t.startsWith("XSRF-TOKEN=")||t.startsWith("X-XSRF-TOKEN=")||t.toLowerCase().startsWith("xsrf-token=")){a=decodeURIComponent(t.split("=")[1]);break}if(!a)throw Error("CSRF token not found in cookies");return await o.delete("/patients/".concat(t),{headers:{"X-XSRF-TOKEN":a}}),!0}catch(e){throw console.error("Error deleting patient with ID ".concat(t,":"),e),e}},f=async t=>{try{return(await i.get("/patients/".concat(t,"/medical-services"))).data.data}catch(e){return console.error("Error fetching medical services for patient ".concat(t,":"),e),[]}},m=async t=>{try{return(await i.get("/patients/".concat(t,"/medical-records"))).data.data}catch(e){return console.error("Error fetching medical records for patient ".concat(t,":"),e),[]}}},2477:function(t,e,a){"use strict";a.d(e,{o:function(){return s}});var r=a(4546);function n(t,e){let a=(0,r.Q)(t),n=(0,r.Q)(e),s=a.getTime()-n.getTime();return s<0?-1:s>0?1:s}function s(t,e){let a=(0,r.Q)(t),s=(0,r.Q)(e),i=n(a,s),o=Math.abs(function(t,e){let a=(0,r.Q)(t),n=(0,r.Q)(e);return a.getFullYear()-n.getFullYear()}(a,s));a.setFullYear(1584),s.setFullYear(1584);let c=n(a,s)===-i,l=i*(o-+c);return 0===l?0:l}},4546:function(t,e,a){"use strict";function r(t){let e=Object.prototype.toString.call(t);return t instanceof Date||"object"==typeof t&&"[object Date]"===e?new t.constructor(+t):new Date("number"==typeof t||"[object Number]"===e||"string"==typeof t||"[object String]"===e?t:NaN)}a.d(e,{Q:function(){return r}})}},function(t){t.O(0,[472,304,971,23,744],function(){return t(t.s=864)}),_N_E=t.O()}]);