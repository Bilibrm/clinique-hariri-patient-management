"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[997],{9977:function(e,a,t){t.d(a,{Z:function(){return i}});var r=t(7437),n=t(2265);let s=n.forwardRef(function(e,a){let{title:t,titleId:r,...s}=e;return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":r},s),t?n.createElement("title",{id:r},t):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5m-13.5-9L12 3m0 0 4.5 4.5M12 3v13.5"}))});var l=t(6648),i=e=>{var a,t,i;let{onSave:o,existingPatient:c,isSaving:d}=e,[u,h]=(0,n.useState)({fullname:"",birthdate:"",gender:"male",blood_type:"",full_address:"",phone:"",passport_number:"",insurance_number:"",status:"active",birth_place:"",external_patient_id:"",insurance_society_branch_id:null,avatar:null}),[p,m]=(0,n.useState)((null==c?void 0:c.avatar)||null),x=(0,n.useRef)(null);(0,n.useEffect)(()=>{if(c){var e;h({fullname:c.fullname||"",birthdate:c.birthdate?c.birthdate.split("T")[0]:"",gender:c.gender.value||"male",blood_type:c.blood_type.value||"",full_address:c.full_address||"",phone:c.phone||"",passport_number:c.passport_number||"",insurance_number:c.insurance_number||"",status:c.status.value||"active",birth_place:c.birth_place||"",external_patient_id:(null===(e=c.external_patient_id)||void 0===e?void 0:e.toString())||"",insurance_society_branch_id:c.insurance_society_branch_id||null,avatar:c.avatar||null}),m(c.avatar||null)}},[c]);let v=e=>{let{name:a,value:t}=e.target;h(e=>({...e,[a]:t}))},b="w-full rounded-lg border border-gray-300 bg-gray-50 p-3 text-gray-900 transition-colors placeholder:text-gray-400 focus:border-brand-blue focus:ring-brand-blue dark:border-gray-600 dark:bg-gray-700/50 dark:text-gray-100 dark:placeholder:text-gray-500",g="block mb-2 font-semibold text-gray-700 dark:text-gray-300";return(0,r.jsx)("div",{className:"rounded-lg bg-white p-8 shadow-md dark:bg-gray-800",children:(0,r.jsxs)("form",{id:"patient-form",onSubmit:e=>{if(e.preventDefault(),!u.fullname||!u.birthdate){alert("يرجى ملء الاسم وتاريخ الميلاد.");return}o({...u,avatar:p})},children:[(0,r.jsxs)("div",{className:"mb-10 flex items-center justify-start gap-8 ",children:[(0,r.jsx)("div",{className:"flex h-28 w-28 items-center justify-center overflow-hidden rounded-lg border-2 border-dashed border-gray-300 bg-gray-100 dark:border-gray-600 dark:bg-gray-700",children:p?(0,r.jsx)(l.default,{src:p,alt:"معاينة المريض",className:"h-full w-full object-cover",width:112,height:112}):(0,r.jsx)(l.default,{src:"/default-avatar.png",alt:"معاينة المريض",className:"h-full w-full object-cover",width:112,height:112})}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("input",{type:"file",ref:x,onChange:e=>{var a;let t=null===(a=e.target.files)||void 0===a?void 0:a[0];if(t){if(t.size>819200){alert("حجم الملف كبير جداً. الحجم الأقصى هو 800 كيلوبايت."),e.target.value="";return}let a=new FileReader;a.onloadend=()=>{m(a.result)},a.readAsDataURL(t)}},className:"hidden",accept:"image/png, image/jpeg, image/gif"}),(0,r.jsxs)("button",{type:"button",onClick:()=>{var e;return null===(e=x.current)||void 0===e?void 0:e.click()},className:"flex items-center gap-2 rounded-lg bg-brand-blue px-4 py-2 text-white shadow transition-colors hover:bg-brand-blue/90",children:[(0,r.jsx)(s,{className:"h-6 w-6"}),"تحميل صورة"]}),(0,r.jsx)("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:"يسمح بصيغ JPG, GIF و PNG. الحجم الأقصى 800 كيلوبايت"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-x-8 gap-y-6 md:grid-cols-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:g,children:"الإسم الكامل"}),(0,r.jsx)("input",{type:"text",name:"fullname",value:u.fullname,onChange:v,className:b,placeholder:"إدخال الاسم الكامل",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:g,children:"تاريخ الميلاد"}),(0,r.jsx)("input",{type:"date",name:"birthdate",value:u.birthdate,onChange:v,className:b,required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:g,children:"مكان الميلاد"}),(0,r.jsx)("input",{type:"text",name:"birth_place",value:u.birth_place,onChange:v,className:b,placeholder:"مثال: الجزائر"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:g,children:"إختر زمرة الدم"}),(0,r.jsxs)("select",{name:"blood_type",value:u.blood_type,onChange:v,className:b,children:[(0,r.jsx)("option",{value:"",children:"إختر زمرة الدم"}),(0,r.jsx)("option",{value:"A+",children:"A+"}),(0,r.jsx)("option",{value:"A-",children:"A-"}),(0,r.jsx)("option",{value:"B+",children:"B+"}),(0,r.jsx)("option",{value:"B-",children:"B-"}),(0,r.jsx)("option",{value:"AB+",children:"AB+"}),(0,r.jsx)("option",{value:"AB-",children:"AB-"}),(0,r.jsx)("option",{value:"O+",children:"O+"}),(0,r.jsx)("option",{value:"O-",children:"O-"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:g,children:"إختر الجنس"}),(0,r.jsxs)("select",{name:"gender",value:u.gender,onChange:v,className:b,children:[(0,r.jsx)("option",{value:"male",children:"ذكر"}),(0,r.jsx)("option",{value:"female",children:"أنثى"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:g,children:"العنوان"}),(0,r.jsx)("input",{type:"text",name:"full_address",value:u.full_address,onChange:v,className:b,placeholder:"إدخال العنوان"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:g,children:"رقم جواز السفر"}),(0,r.jsx)("input",{type:"text",name:"passport_number",value:null!==(a=u.passport_number)&&void 0!==a?a:"",onChange:v,className:b,placeholder:"ABC123456"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:g,children:"المعرف الخارجي"}),(0,r.jsx)("input",{type:"text",name:"external_patient_id",value:null!==(t=u.external_patient_id)&&void 0!==t?t:"",onChange:v,className:b,placeholder:"123456789"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:g,children:"شركة التأمين"}),(0,r.jsxs)("select",{name:"insurance_society_branch_id",value:null===u.insurance_society_branch_id?"":u.insurance_society_branch_id,onChange:v,className:b,children:[(0,r.jsx)("option",{value:"",children:"إختر شركة التأمين"}),(0,r.jsx)("option",{value:"1",children:"شركة السلام"}),(0,r.jsx)("option",{value:"2",children:"شركة النور"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:g,children:"رقم التأمين"}),(0,r.jsx)("input",{type:"text",name:"insurance_number",value:null!==(i=u.insurance_number)&&void 0!==i?i:"",onChange:v,className:b,placeholder:"INS-12345"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:g,children:"رقم الهاتف"}),(0,r.jsx)("input",{type:"tel",name:"phone",value:u.phone,onChange:v,className:b,placeholder:"0555123456"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:g,children:"الحالة"}),(0,r.jsxs)("select",{name:"status",value:u.status,onChange:v,className:b,children:[(0,r.jsx)("option",{value:"active",children:"نشط"}),(0,r.jsx)("option",{value:"inactive",children:"غير نشط"})]})]})]}),(0,r.jsx)("div",{className:"mt-8 text-end",children:(0,r.jsx)("button",{type:"submit",disabled:d,className:"rounded-lg bg-brand-blue px-6 py-2.5 text-white shadow transition-colors hover:bg-brand-blue/90 disabled:opacity-50",children:d?"جاري الحفظ...":"حفظ التغييرات"})})]})})}},4538:function(e,a,t){var r=t(7437);t(2265),a.Z=e=>{let{title:a,subtitle:t,actions:n}=e;return(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:a}),(0,r.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:t})]}),n&&(0,r.jsx)("div",{children:n})]})}},5101:function(e,a,t){var r=t(7437);t(2265),a.Z=()=>(0,r.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-white bg-opacity-75 dark:bg-gray-900 dark:bg-opacity-75",children:(0,r.jsx)("div",{className:"h-16 w-16",children:(0,r.jsxs)("svg",{className:"animate-spin text-brand-blue",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})})})},7619:function(e,a,t){t.d(a,{b$:function(){return u},hT:function(){return p},pd:function(){return x},Mp:function(){return m},YR:function(){return d},X4:function(){return c},xu:function(){return h}});var r=t(8472);let n="https://erp-api.cliniquehariri.com/api/v1",s="118|Iz5rNFTyoKSqkjyKcYPkYGEidKSVyaykGex8shduf2115e5b",l=r.Z.create({baseURL:n,headers:{"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest"},withCredentials:!0});l.interceptors.request.use(e=>(s&&(e.headers.Authorization="Bearer ".concat(s)),e),e=>Promise.reject(e));let i=r.Z.create({withCredentials:!0,headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"}});async function o(){try{let e=new URL(n).origin;await i.get("".concat(e,"/sanctum/csrf-cookie"),{withCredentials:!0,headers:{Accept:"application/json"}})}catch(e){throw console.error("Error fetching CSRF token:",e),e}}i.interceptors.response.use(e=>e,e=>(console.error("API Error:",e),Promise.reject(e)));let c=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{let a=await l.get("/patients",{params:{page:e.page||1,per_page:e.per_page||10,search:e.search||"",paginate:!0,doctor_id:"1"}});return{data:a.data.data,meta:a.data.meta}}catch(e){throw console.error("Error fetching patients:",e),e}},d=async e=>{try{return(await l.get("/patients/".concat(e))).data.data}catch(a){throw console.error("Error fetching patient with ID ".concat(e,":"),a),a}},u=async e=>{try{await o();let a=document.cookie.split(";").map(e=>e.trim()),t=null;for(let e of a)if(e.startsWith("XSRF-TOKEN=")||e.startsWith("X-XSRF-TOKEN=")||e.toLowerCase().startsWith("xsrf-token=")){t=decodeURIComponent(e.split("=")[1]);break}if(!t)throw Error("CSRF token not found in cookies");if(!(e.avatar&&"string"==typeof e.avatar&&e.avatar.startsWith("data:")))return(await i.post("/patients",e,{headers:{"X-XSRF-TOKEN":t}})).data.data;{let a=new FormData,r=await fetch(e.avatar),n=await r.blob();return a.append("avatar",n,"avatar.jpg"),Object.entries(e).forEach(e=>{let[t,r]=e;"avatar"!==t&&null!=r&&a.append(t,r.toString())}),(await i.post("/patients",a,{headers:{"Content-Type":"multipart/form-data","X-XSRF-TOKEN":t}})).data.data}}catch(e){throw console.error("Error adding patient:",e),e}},h=async(e,a)=>{try{await o();let t=document.cookie.split(";").map(e=>e.trim()),r=null;for(let e of t)if(e.startsWith("XSRF-TOKEN=")||e.startsWith("X-XSRF-TOKEN=")||e.toLowerCase().startsWith("xsrf-token=")){r=decodeURIComponent(e.split("=")[1]);break}if(!r)throw Error("CSRF token not found in cookies");if(!(a.avatar&&"string"==typeof a.avatar&&a.avatar.startsWith("data:")))return(await i.put("/patients/".concat(e),a,{headers:{"X-XSRF-TOKEN":r}})).data.data;{let t=new FormData,n=await fetch(a.avatar),s=await n.blob();return t.append("avatar",s,"avatar.jpg"),Object.entries(a).forEach(e=>{let[a,r]=e;"avatar"!==a&&null!=r&&t.append(a,r.toString())}),t.append("_method","PUT"),(await i.post("/patients/".concat(e),t,{headers:{"Content-Type":"multipart/form-data","X-XSRF-TOKEN":r}})).data.data}}catch(a){throw console.error("Error updating patient with ID ".concat(e,":"),a),a}},p=async e=>{try{await o();let a=document.cookie.split(";").map(e=>e.trim()),t=null;for(let e of a)if(e.startsWith("XSRF-TOKEN=")||e.startsWith("X-XSRF-TOKEN=")||e.toLowerCase().startsWith("xsrf-token=")){t=decodeURIComponent(e.split("=")[1]);break}if(!t)throw Error("CSRF token not found in cookies");return await i.delete("/patients/".concat(e),{headers:{"X-XSRF-TOKEN":t}}),!0}catch(a){throw console.error("Error deleting patient with ID ".concat(e,":"),a),a}},m=async e=>{try{return(await l.get("/patients/".concat(e,"/medical-services"))).data.data}catch(a){return console.error("Error fetching medical services for patient ".concat(e,":"),a),[]}},x=async e=>{try{return(await l.get("/patients/".concat(e,"/medical-records"))).data.data}catch(a){return console.error("Error fetching medical records for patient ".concat(e,":"),a),[]}}}}]);