exports.id=160,exports.ids=[160],exports.modules={3513:(e,a,t)=>{Promise.resolve().then(t.bind(t,7948))},7948:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>l});var r=t(326);t(7577);var s=t(8129),n=t(58),i=t(5047);function l({children:e}){let a=(0,i.usePathname)();return r.jsx(s.M,{mode:"wait",children:r.jsx(n.E.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},exit:{y:-20,opacity:0},transition:{duration:.3},children:e},a)})}},9114:(e,a,t)=>{"use strict";t.d(a,{Z:()=>l});var r=t(326),s=t(7577);let n=s.forwardRef(function({title:e,titleId:a,...t},r){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":a},t),e?s.createElement("title",{id:a},e):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5m-13.5-9L12 3m0 0 4.5 4.5M12 3v13.5"}))});var i=t(6226);let l=({onSave:e,existingPatient:a,isSaving:t})=>{let[l,o]=(0,s.useState)({fullname:"",birthdate:"",gender:"male",blood_type:"",full_address:"",phone:"",passport_number:"",insurance_number:"",status:"active",birth_place:"",external_patient_id:"",insurance_society_branch_id:null,avatar:null}),[d,c]=(0,s.useState)(a?.avatar||null),h=(0,s.useRef)(null);(0,s.useEffect)(()=>{a&&(o({fullname:a.fullname||"",birthdate:a.birthdate?a.birthdate.split("T")[0]:"",gender:a.gender.value||"male",blood_type:a.blood_type.value||"",full_address:a.full_address||"",phone:a.phone||"",passport_number:a.passport_number||"",insurance_number:a.insurance_number||"",status:a.status.value||"active",birth_place:a.birth_place||"",external_patient_id:a.external_patient_id?.toString()||"",insurance_society_branch_id:a.insurance_society_branch_id||null,avatar:a.avatar||null}),c(a.avatar||null))},[a]);let p=e=>{let{name:a,value:t}=e.target;o(e=>({...e,[a]:t}))},u="w-full rounded-lg border border-gray-300 bg-gray-50 p-3 text-gray-900 transition-colors placeholder:text-gray-400 focus:border-brand-blue focus:ring-brand-blue dark:border-gray-600 dark:bg-gray-700/50 dark:text-gray-100 dark:placeholder:text-gray-500",m="block mb-2 font-semibold text-gray-700 dark:text-gray-300";return r.jsx("div",{className:"rounded-lg bg-white p-8 shadow-md dark:bg-gray-800",children:(0,r.jsxs)("form",{id:"patient-form",onSubmit:a=>{if(a.preventDefault(),!l.fullname||!l.birthdate){alert("يرجى ملء الاسم وتاريخ الميلاد.");return}e({...l,avatar:d})},children:[(0,r.jsxs)("div",{className:"mb-10 flex items-center justify-start gap-8 ",children:[r.jsx("div",{className:"flex h-28 w-28 items-center justify-center overflow-hidden rounded-lg border-2 border-dashed border-gray-300 bg-gray-100 dark:border-gray-600 dark:bg-gray-700",children:d?r.jsx(i.default,{src:d,alt:"معاينة المريض",className:"h-full w-full object-cover",width:112,height:112}):r.jsx(i.default,{src:"/default-avatar.png",alt:"معاينة المريض",className:"h-full w-full object-cover",width:112,height:112})}),(0,r.jsxs)("div",{className:"text-right",children:[r.jsx("input",{type:"file",ref:h,onChange:e=>{let a=e.target.files?.[0];if(a){if(a.size>819200){alert("حجم الملف كبير جداً. الحجم الأقصى هو 800 كيلوبايت."),e.target.value="";return}let t=new FileReader;t.onloadend=()=>{c(t.result)},t.readAsDataURL(a)}},className:"hidden",accept:"image/png, image/jpeg, image/gif"}),(0,r.jsxs)("button",{type:"button",onClick:()=>h.current?.click(),className:"flex items-center gap-2 rounded-lg bg-brand-blue px-4 py-2 text-white shadow transition-colors hover:bg-brand-blue/90",children:[r.jsx(n,{className:"h-6 w-6"}),"تحميل صورة"]}),r.jsx("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:"يسمح بصيغ JPG, GIF و PNG. الحجم الأقصى 800 كيلوبايت"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-x-8 gap-y-6 md:grid-cols-2",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:m,children:"الإسم الكامل"}),r.jsx("input",{type:"text",name:"fullname",value:l.fullname,onChange:p,className:u,placeholder:"إدخال الاسم الكامل",required:!0})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:m,children:"تاريخ الميلاد"}),r.jsx("input",{type:"date",name:"birthdate",value:l.birthdate,onChange:p,className:u,required:!0})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:m,children:"مكان الميلاد"}),r.jsx("input",{type:"text",name:"birth_place",value:l.birth_place,onChange:p,className:u,placeholder:"مثال: الجزائر"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:m,children:"إختر زمرة الدم"}),(0,r.jsxs)("select",{name:"blood_type",value:l.blood_type,onChange:p,className:u,children:[r.jsx("option",{value:"",children:"إختر زمرة الدم"}),r.jsx("option",{value:"A+",children:"A+"}),r.jsx("option",{value:"A-",children:"A-"}),r.jsx("option",{value:"B+",children:"B+"}),r.jsx("option",{value:"B-",children:"B-"}),r.jsx("option",{value:"AB+",children:"AB+"}),r.jsx("option",{value:"AB-",children:"AB-"}),r.jsx("option",{value:"O+",children:"O+"}),r.jsx("option",{value:"O-",children:"O-"})]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:m,children:"إختر الجنس"}),(0,r.jsxs)("select",{name:"gender",value:l.gender,onChange:p,className:u,children:[r.jsx("option",{value:"male",children:"ذكر"}),r.jsx("option",{value:"female",children:"أنثى"})]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:m,children:"العنوان"}),r.jsx("input",{type:"text",name:"full_address",value:l.full_address,onChange:p,className:u,placeholder:"إدخال العنوان"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:m,children:"رقم جواز السفر"}),r.jsx("input",{type:"text",name:"passport_number",value:l.passport_number??"",onChange:p,className:u,placeholder:"ABC123456"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:m,children:"المعرف الخارجي"}),r.jsx("input",{type:"text",name:"external_patient_id",value:l.external_patient_id??"",onChange:p,className:u,placeholder:"123456789"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:m,children:"شركة التأمين"}),(0,r.jsxs)("select",{name:"insurance_society_branch_id",value:null===l.insurance_society_branch_id?"":l.insurance_society_branch_id,onChange:p,className:u,children:[r.jsx("option",{value:"",children:"إختر شركة التأمين"}),r.jsx("option",{value:"1",children:"شركة السلام"}),r.jsx("option",{value:"2",children:"شركة النور"})]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:m,children:"رقم التأمين"}),r.jsx("input",{type:"text",name:"insurance_number",value:l.insurance_number??"",onChange:p,className:u,placeholder:"INS-12345"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:m,children:"رقم الهاتف"}),r.jsx("input",{type:"tel",name:"phone",value:l.phone,onChange:p,className:u,placeholder:"0555123456"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:m,children:"الحالة"}),(0,r.jsxs)("select",{name:"status",value:l.status,onChange:p,className:u,children:[r.jsx("option",{value:"active",children:"نشط"}),r.jsx("option",{value:"inactive",children:"غير نشط"})]})]})]}),r.jsx("div",{className:"mt-8 text-end",children:r.jsx("button",{type:"submit",disabled:t,className:"rounded-lg bg-brand-blue px-6 py-2.5 text-white shadow transition-colors hover:bg-brand-blue/90 disabled:opacity-50",children:t?"جاري الحفظ...":"حفظ التغييرات"})})]})})}},1443:(e,a,t)=>{"use strict";t.d(a,{Z:()=>s});var r=t(326);t(7577);let s=({title:e,subtitle:a,actions:t})=>(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:e}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:a})]}),t&&r.jsx("div",{children:t})]})},9007:(e,a,t)=>{"use strict";t.d(a,{Z:()=>s});var r=t(326);t(7577);let s=()=>r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-white bg-opacity-75 dark:bg-gray-900 dark:bg-opacity-75",children:r.jsx("div",{className:"h-16 w-16",children:(0,r.jsxs)("svg",{className:"animate-spin text-brand-blue",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})})})},8448:(e,a,t)=>{"use strict";t.d(a,{b$:()=>c,hT:()=>p,pd:()=>m,Mp:()=>u,YR:()=>d,X4:()=>o,xu:()=>h});var r=t(4464);let s="118|Iz5rNFTyoKSqkjyKcYPkYGEidKSVyaykGex8shduf2115e5b",n=r.Z.create({baseURL:"https://erp-api.cliniquehariri.com/api/v1",headers:{"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest"},withCredentials:!0});n.interceptors.request.use(e=>(s&&(e.headers.Authorization=`Bearer ${s}`),e),e=>Promise.reject(e));let i=r.Z.create({withCredentials:!0,headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"}});async function l(){}i.interceptors.response.use(e=>e,e=>(console.error("API Error:",e),Promise.reject(e)));let o=async(e={})=>{try{let a=await n.get("/patients",{params:{page:e.page||1,per_page:e.per_page||10,search:e.search||"",paginate:!0,doctor_id:"1"}});return{data:a.data.data,meta:a.data.meta}}catch(e){throw console.error("Error fetching patients:",e),e}},d=async e=>{try{return(await n.get(`/patients/${e}`)).data.data}catch(a){throw console.error(`Error fetching patient with ID ${e}:`,a),a}},c=async e=>{try{await l();let a=document.cookie.split(";").map(e=>e.trim()),t=null;for(let e of a)if(e.startsWith("XSRF-TOKEN=")||e.startsWith("X-XSRF-TOKEN=")||e.toLowerCase().startsWith("xsrf-token=")){t=decodeURIComponent(e.split("=")[1]);break}if(!t)throw Error("CSRF token not found in cookies");if(!(e.avatar&&"string"==typeof e.avatar&&e.avatar.startsWith("data:")))return(await i.post("/patients",e,{headers:{"X-XSRF-TOKEN":t}})).data.data;{let a=new FormData,r=await fetch(e.avatar),s=await r.blob();return a.append("avatar",s,"avatar.jpg"),Object.entries(e).forEach(([e,t])=>{"avatar"!==e&&null!=t&&a.append(e,t.toString())}),(await i.post("/patients",a,{headers:{"Content-Type":"multipart/form-data","X-XSRF-TOKEN":t}})).data.data}}catch(e){throw console.error("Error adding patient:",e),e}},h=async(e,a)=>{try{await l();let t=document.cookie.split(";").map(e=>e.trim()),r=null;for(let e of t)if(e.startsWith("XSRF-TOKEN=")||e.startsWith("X-XSRF-TOKEN=")||e.toLowerCase().startsWith("xsrf-token=")){r=decodeURIComponent(e.split("=")[1]);break}if(!r)throw Error("CSRF token not found in cookies");if(!(a.avatar&&"string"==typeof a.avatar&&a.avatar.startsWith("data:")))return(await i.put(`/patients/${e}`,a,{headers:{"X-XSRF-TOKEN":r}})).data.data;{let t=new FormData,s=await fetch(a.avatar),n=await s.blob();return t.append("avatar",n,"avatar.jpg"),Object.entries(a).forEach(([e,a])=>{"avatar"!==e&&null!=a&&t.append(e,a.toString())}),t.append("_method","PUT"),(await i.post(`/patients/${e}`,t,{headers:{"Content-Type":"multipart/form-data","X-XSRF-TOKEN":r}})).data.data}}catch(a){throw console.error(`Error updating patient with ID ${e}:`,a),a}},p=async e=>{try{await l();let a=document.cookie.split(";").map(e=>e.trim()),t=null;for(let e of a)if(e.startsWith("XSRF-TOKEN=")||e.startsWith("X-XSRF-TOKEN=")||e.toLowerCase().startsWith("xsrf-token=")){t=decodeURIComponent(e.split("=")[1]);break}if(!t)throw Error("CSRF token not found in cookies");return await i.delete(`/patients/${e}`,{headers:{"X-XSRF-TOKEN":t}}),!0}catch(a){throw console.error(`Error deleting patient with ID ${e}:`,a),a}},u=async e=>{try{return(await n.get(`/patients/${e}/medical-services`)).data.data}catch(a){return console.error(`Error fetching medical services for patient ${e}:`,a),[]}},m=async e=>{try{return(await n.get(`/patients/${e}/medical-records`)).data.data}catch(a){return console.error(`Error fetching medical records for patient ${e}:`,a),[]}}},5305:(e,a,t)=>{"use strict";t.r(a),t.d(a,{$$typeof:()=>i,__esModule:()=>n,default:()=>l});var r=t(8570);let s=(0,r.createProxy)(String.raw`C:\Users\billa\Downloads\clinique-hariri-patient-management\app\patients\layout.tsx`),{__esModule:n,$$typeof:i}=s;s.default;let l=(0,r.createProxy)(String.raw`C:\Users\billa\Downloads\clinique-hariri-patient-management\app\patients\layout.tsx#default`)}};